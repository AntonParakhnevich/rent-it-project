<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

  <changeSet id="1.1" author="a.parakhnevich">
    <sql>
      create table if not exists items
      (
        id             bigint auto_increment
          primary key,
        category       varchar(255) null,
        created_at     datetime(6)                                                                                                                                                                                       null,
        deposit_amount decimal(38, 2)                                                                                                                                                                                    null,
        description    varchar(255)                                                                                                                                                                                      null,
        is_available   bit                                                                                                                                                                                               null,
        location       varchar(255)                                                                                                                                                                                      null,
        price_per_day  decimal(38, 2)                                                                                                                                                                                    not null,
        title          varchar(255)                                                                                                                                                                                      not null,
        updated_at     datetime(6)                                                                                                                                                                                       null,
        user_id        bigint                                                                                                                                                                                            null
      )
        collate = utf8mb4_unicode_ci;
    </sql>
  </changeSet>

  <changeSet id="1.2" author="a.parakhnevich">
    <sql>
      create table if not exists rentals
      (
        id             bigint auto_increment
          primary key,
        created_at     datetime(6)                                                                        null,
        deposit_amount decimal(38, 2)                                                                     null,
        end_date       datetime(6)                                                                        not null,
        start_date     datetime(6)                                                                        not null,
        status         varchar(50) not null,
        total_price    decimal(38, 2)                                                                     not null,
        updated_at     datetime(6)                                                                        null,
        user_id        bigint                                                                             null,
        item_id        bigint                                                                             not null,
        constraint FK9t4jdsn113em9kyh6wkl81efm
          foreign key (item_id) references items (id)
      );
    </sql>
  </changeSet>

  <changeSet id="1.3" author="a.parakhnevich">
    <sql>
      create table if not exists item_images
      (
        item_id   bigint       not null,
        image_url varchar(255) null,
        constraint FK31vykiuqi6nfw2rmvw37qlydy
          foreign key (item_id) references items (id)
      );
    </sql>
  </changeSet>

</databaseChangeLog>